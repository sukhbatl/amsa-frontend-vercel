<div *ngIf="isLoading" class="flex justify-center items-center min-h-screen">
  <p-progressSpinner
    [style]="{ width: '50px', height: '50px' }"
    strokeWidth="4"
    fill="transparent"
    animationDuration="1s"
  ></p-progressSpinner>
</div>

<div *ngIf="!isLoading">
  <h2 class="text-3xl font-bold mb-4">Badge Description:</h2>
  <div class="badgeDescription mb-8">
    <p-card class="animated fadeIn" [style]="{ width: '300px', 'max-width': '100%' }">
      <div class="text-center mb-3">
        <h3 class="text-2xl font-bold">
          {{ badgeUsers?.Badge?.name }}
        </h3>
      </div>
      <img [src]="getImageUrl(badgeUsers?.Badge?.picUrl)" [title]="badgeUsers?.Badge?.name" class="w-full mb-3" />
      <div class="mt-3">
        <p class="text-gray-600">
          {{ badgeUsers?.Badge?.description }}
        </p>
      </div>
    </p-card>
  </div>

  <h2 class="text-3xl font-bold mb-4">Members who own this badge:</h2>

  <div class="flex flex-wrap justify-center">
    <p-card
      *ngFor="let user of badgeUsers?.Users"
      class="max-w-72 min-w-64 m-3 cursor-pointer hover:shadow-lg transition-shadow"
      [style]="{ width: '300px' }"
      (click)="navigateToProfile(user.id)"
    >
      <div class="text-center mb-3">
        <h3 class="text-xl font-bold">
          {{ user.firstName + ' ' + user.lastName }}
        </h3>
      </div>
      <div class="object-cover w-40 h-40 mx-auto my-2">
        <img [src]="backendUrl + user.profilePic" [title]="user.firstName" class="rounded-full" />
      </div>
      <div class="mt-3 space-y-2">
        <div class="flex items-center">
          <i class="pi pi-envelope mr-2"></i>
          <div>{{ user.email }}</div>
        </div>
        <div class="flex items-center">
          <i class="pi pi-building mr-2"></i>
          <div>{{ user.schoolName }}</div>
        </div>
      </div>
    </p-card>
  </div>
</div>
