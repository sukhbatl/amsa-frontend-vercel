<div *ngIf="isLoading" class="flex justify-center items-center min-h-screen">
  <p-progressSpinner [style]="{'width': '50px', 'height': '50px'}" strokeWidth="4" fill="transparent" animationDuration="1s"></p-progressSpinner>
</div>

<div class="flex flex-wrap justify-center gap-6 p-4" *ngIf="!isLoading">
  <p-card *ngFor="let post of posts" class="animated fadeIn hover:shadow-lg transition-shadow duration-300 cursor-pointer" 
          [style]="{'width': '350px', 'margin-bottom': '1rem'}" 
          (click)="navigateToPost(post.id)" 
          [attr.aria-label]="'Read post: ' + post.title">
    <ng-template pTemplate="header">
      <img [src]="backendUrl + post.picUrl" [title]="post.title" [alt]="post.title" class="w-full h-48 object-cover">
    </ng-template>
    
    <h3 class="text-xl font-bold mb-2">{{post.title}}</h3>
    <p class="text-gray-600 mb-2">{{post.subTitle}}</p>
    <p class="text-gray-700 mb-4 line-clamp-3">
      {{post.content}}
    </p>
    
    <ng-template pTemplate="footer">
      <div class="flex justify-between items-center">
        <p-button 
          icon="pi pi-heart" 
          [text]="true" 
          (onClick)="likeOrDislikePost(post.id)" 
          aria-label="Like or unlike this post"
          class="p-button-sm">
        </p-button>
        <p-button 
          label="Read More..." 
          [text]="true" 
          (onClick)="navigateToPost(post.id)"
          class="p-button-sm">
        </p-button>
      </div>
      
      <!-- Social Sharing -->
      <div class="mt-3">
        <app-social-sharing [shareData]="getPostShareData(post)"></app-social-sharing>
      </div>
    </ng-template>
  </p-card>
</div>

<div class="flex justify-center gap-4 mt-8">
  <p-button 
    icon="pi pi-chevron-left" 
    [text]="true" 
    (onClick)="previousBatch()" 
    [disabled]="pageNumber === 0" 
    aria-label="Previous page">
  </p-button>
  <p-button 
    icon="pi pi-chevron-right" 
    [text]="true" 
    (onClick)="nextBatch()" 
    [disabled]="posts.length < 8" 
    aria-label="Next page">
  </p-button>
</div>


